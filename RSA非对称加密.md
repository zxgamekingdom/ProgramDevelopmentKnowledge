# RSA非对称加密

# 构建实例对象

一般情况下使用`System.Security.Cryptography.RSA Create()`及其重载方法即可。

RSA有三个实现类，

`RSACng`使用的是Windows CNG库的RSA算法，在Windows以外的系统是不可使用的。

`RSACryptoServiceProvider`纯.Net实现的RSA算法，在.Net环境中可以使用。一般用`RSA.Create()`方法创建的就是该类的实例对象。

`RSAOpenSsl`使用的是OpenSSL的RSA算法，在Windows上不可用，只有在安装了OpenSSL的系统上使用。

# 私钥与公钥

**私钥可以推算出唯一一个与该私钥对应的公钥**。

**公钥不能推算出与之对应的私钥**。

**公钥可以随意分发，但私钥不能被他人知晓**。

RSA算法的公钥和私钥是**一对一**的。

一般的应用场景就是**公钥加密，私钥解密**。

**公钥加密的数据公钥无法解密，只有私钥可以解密**。私钥加密的数据私钥无法解密，只有公钥可以解密。但极度不推荐私钥加密，公钥解密。

**.Net的RSA加密算法能够加密的最大字节数为`RSA.KeySize/8-11`**，加密超过这个长度的数组会直接抛出异常。

构造一个RSA实例对象时，就已经生成好了一对公私钥，当然可以导出这对公私钥，也可以导入已经存在的公私钥。

# 应用场景

多方进行数据交流时，加密交流的数据。

具体操作方法：

1. 客户端获取RSA的公钥。

2. 客户端生成一个对称加密算法的密钥，使用对称加密密钥对需要交流的数据进行加密。

3. 客户端导入RSA公钥，并使用公钥加密客户端生成的对称加密算法的密钥，并与加了密的交流数据打包。

4. 服务端打开数据包，使用RSA私钥解密客户端生成的对称加密算法的密钥。

5. 服务端使用客户端生成的对称加密算法的密钥解密交流的数据。

